<p align="center">
  <img src="https://img.shields.io/badge/PHP-8.2+-8892BF?style=for-the-badge&logo=php&logoColor=white" alt="PHP 8.2+"/>
  <img src="https://img.shields.io/badge/Framework-CFC_V7.7-00D1B2?style=for-the-badge" alt="CFC V7.7"/>
  <img src="https://img.shields.io/badge/AI-DeepSeek_V3-FF6B6B?style=for-the-badge" alt="DeepSeek V3"/>
  <img src="https://img.shields.io/badge/Database-PostgreSQL_16-336791?style=for-the-badge&logo=postgresql&logoColor=white" alt="PostgreSQL"/>
  <img src="https://img.shields.io/badge/Vector-pgvector-4169E1?style=for-the-badge" alt="pgvector"/>
  <img src="https://img.shields.io/badge/License-MIT-green?style=for-the-badge" alt="MIT License"/>
</p>

<h1 align="center">ğŸš€ CFC AI Framework V7.7</h1>

<p align="center">
  <strong>ä¼ä¸šçº§ AI Agent ç³»ç»Ÿ | Enterprise-Grade AI Agent System</strong>
</p>

<p align="center">
  åŸºäº <b>CFC (CRM Framework Core)</b> æ¶æ„çš„é«˜æ€§èƒ½ AI åº”ç”¨æ¡†æ¶<br/>
  éµå¾ªã€Œå•ä¸€å…¥å£ | æè‡´åˆ†å±‚ | ä¾èµ–æ³¨å…¥ã€è®¾è®¡å“²å­¦
</p>

<p align="center">
  <a href="#-å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#-æ ¸å¿ƒç‰¹æ€§">æ ¸å¿ƒç‰¹æ€§</a> â€¢
  <a href="#-æ¶æ„è®¾è®¡">æ¶æ„è®¾è®¡</a> â€¢
  <a href="#-api-æ–‡æ¡£">API æ–‡æ¡£</a> â€¢
  <a href="#-éƒ¨ç½²æŒ‡å—">éƒ¨ç½²æŒ‡å—</a>
</p>

---

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|:---:|:---:|:---|
| **æºç æ–‡ä»¶** | 73+ | PHP 8.2+ ä¸¥æ ¼ç±»å‹ |
| **ä»£ç è¡Œæ•°** | 14,800+ | ä¸å«ç©ºè¡Œå’Œæ³¨é‡Š |
| **åˆè§„è¯„åˆ†** | **94/100** | CFC ä¸ƒå®—ç½ªåˆè§„å®¡è®¡ |
| **API ç«¯ç‚¹** | 15+ | RESTful + SSE æµå¼ |
| **AI æ¨¡å‹** | 5+ | DeepSeek/OpenAI/Ollama |

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ§  å¤šæ¨¡å‹æ™ºèƒ½è·¯ç”±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ModelRouter æ™ºèƒ½è°ƒåº¦                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç®€å•å¯¹è¯ â”€â”€â”€â”€â”€â”€â–º DeepSeek V3 (é«˜æ€§ä»·æ¯”)                 â”‚
â”‚  åˆåŒå®¡æŸ¥ â”€â”€â”€â”€â”€â”€â–º OpenAI GPT-4 (å¼ºæ¨ç†)                  â”‚
â”‚  æ•æ„Ÿæ•°æ® â”€â”€â”€â”€â”€â”€â–º Ollama æœ¬åœ°éƒ¨ç½² (æ•°æ®ä¸å‡ºåŸŸ)            â”‚
â”‚  å‘é‡ç”Ÿæˆ â”€â”€â”€â”€â”€â”€â–º text-embedding-3-small                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”§ å®Œæ•´åŠŸèƒ½çŸ©é˜µ

| æ¨¡å— | åŠŸèƒ½ | çŠ¶æ€ |
|:---|:---|:---:|
| **Pipeline æµæ°´çº¿** | 8 çº§å¯æ’æ‹”å¤„ç†ç®¡é“ | âœ… |
| **RAG çŸ¥è¯†åº“** | æ–‡æ¡£åˆ‡ç‰‡ + pgvector æ£€ç´¢ | âœ… |
| **Memory è®°å¿†ç³»ç»Ÿ** | çŸ­æœŸ/æ‘˜è¦/é•¿æœŸ ä¸‰çº§è®°å¿† | âœ… |
| **Tool Calling** | AI å·¥å…·è°ƒç”¨ + å®‰å…¨æ²™ç®± | âœ… |
| **SSE æµå¼è¾“å‡º** | å®æ—¶æ‰“å­—æœºæ•ˆæœ | âœ… |
| **å¤š Agent è¾©è®º** | è§’è‰²å¯¹æŠ—å¼æ¨ç† | âœ… |
| **æˆæœ¬ç›‘æ§** | Token è®¡è´¹ + ç”¨é‡å‘Šè­¦ | âœ… |
| **å¼‚æ­¥é˜Ÿåˆ—** | è€—æ—¶ä»»åŠ¡åå°å¤„ç† | âœ… |

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### CFC V7.7 åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ğŸŒ HTTP Request                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ public/index.php (å”¯ä¸€å…¥å£ - Single Entry Point)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  App::boot() â†’ Router::dispatch() â†’ Controller â†’ Response::send()    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ›ï¸ Bootstrap Layer                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   App.php   â”‚  â”‚ Router.php  â”‚  â”‚  routes.php (IoC ä¾èµ–è£…é…)          â”‚  â”‚
â”‚  â”‚  (å¯åŠ¨å™¨)   â”‚  â”‚ (RESTful)   â”‚  â”‚  $controller = new XxxController()  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ® Controller Layer (ç˜¦æ§åˆ¶å™¨)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CuigeController â”‚ DebateController â”‚ RagController â”‚ SystemController â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  èŒè´£: è§£æè¾“å…¥ â†’ è°ƒç”¨ Service â†’ è¿”å› Response (ç¦æ­¢ä¸šåŠ¡é€»è¾‘!)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        âš™ï¸ Service Layer (ä¸šåŠ¡æ ¸å¿ƒ)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                       AI Pipeline System                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚Rate â”‚â†’â”‚Safe â”‚â†’â”‚Load â”‚â†’â”‚Plan â”‚â†’â”‚Call â”‚â†’â”‚Exec â”‚â†’â”‚Save â”‚â†’â”‚Formatâ”‚    â”‚  â”‚
â”‚  â”‚  â”‚Limitâ”‚ â”‚Checkâ”‚ â”‚Memoryâ”‚ â”‚Toolsâ”‚ â”‚Modelâ”‚ â”‚Tool â”‚ â”‚Memoryâ”‚ â”‚Outputâ”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ CuigeService â”‚  â”‚ DebateServiceâ”‚  â”‚ RAG Service  â”‚  â”‚MemoryEngine  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ”Œ Provider Layer (æ¨¡å‹é©±åŠ¨)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  DeepSeek    â”‚  â”‚   OpenAI     â”‚  â”‚   Ollama     â”‚  â”‚  Embedding   â”‚    â”‚
â”‚  â”‚  Provider    â”‚  â”‚  Provider    â”‚  â”‚  Provider    â”‚  â”‚  Provider    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ’¾ Storage Layer                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ PostgreSQL   â”‚  â”‚   Redis      â”‚  â”‚  pgvector    â”‚  â”‚ File System  â”‚    â”‚
â”‚  â”‚ (ä¸»æ•°æ®åº“)   â”‚  â”‚  (ç¼“å­˜/é˜Ÿåˆ—) â”‚  â”‚ (å‘é‡æ£€ç´¢)   â”‚  â”‚ (æ–‡æ¡£å­˜å‚¨)   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ ç›®å½•ç»“æ„

```
CFC_AI/
â”œâ”€â”€ ğŸ“‚ public/                      # Web å…¥å£
â”‚   â”œâ”€â”€ index.php                   # ğŸšª å”¯ä¸€ HTTP å…¥å£
â”‚   â”œâ”€â”€ cuige.html                  # ğŸ¤– AI åŠ©æ‰‹å‰ç«¯
â”‚   â””â”€â”€ rag.html                    # ğŸ“š çŸ¥è¯†åº“ç®¡ç†
â”‚
â”œâ”€â”€ ğŸ“‚ src/                         # æ ¸å¿ƒæºç 
â”‚   â”œâ”€â”€ ğŸ“‚ Bootstrap/               # æ¡†æ¶å¼•å¯¼
â”‚   â”‚   â”œâ”€â”€ App.php                 # åº”ç”¨å¯åŠ¨å™¨
â”‚   â”‚   â”œâ”€â”€ Router.php              # RESTful è·¯ç”±
â”‚   â”‚   â””â”€â”€ routes.php              # è·¯ç”± + IoC è£…é…
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ Core/                    # æ¡†æ¶æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ Request.php             # HTTP è¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ Response.php            # JSON å“åº”
â”‚   â”‚   â””â”€â”€ SSEResponse.php         # æµå¼å“åº” (SSE)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ Controllers/             # æ§åˆ¶å™¨ (ç˜¦)
â”‚   â”‚   â”œâ”€â”€ CuigeController.php     # AI åŠ©æ‰‹æ¥å£
â”‚   â”‚   â”œâ”€â”€ DebateController.php    # è¾©è®ºç³»ç»Ÿæ¥å£
â”‚   â”‚   â”œâ”€â”€ RagController.php       # çŸ¥è¯†åº“æ¥å£
â”‚   â”‚   â””â”€â”€ SystemController.php    # ç³»ç»Ÿå¥åº·æ£€æŸ¥
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ Config/                  # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ agents.php              # Agent è§’è‰²å®šä¹‰
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ Services/AI/             # ğŸ§  AI æœåŠ¡å±‚ (æ ¸å¿ƒ)
â”‚       â”œâ”€â”€ ğŸ“‚ Core/                # AI æ ¸å¿ƒç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ AIManager.php       # AI ç»Ÿä¸€é—¨é¢
â”‚       â”‚   â”œâ”€â”€ ModelRouter.php     # æ¨¡å‹æ™ºèƒ½è·¯ç”±
â”‚       â”‚   â””â”€â”€ ğŸ“‚ RAG/             # çŸ¥è¯†æ£€ç´¢
â”‚       â”‚       â”œâ”€â”€ VectorService.php
â”‚       â”‚       â”œâ”€â”€ EmbeddingEngine.php
â”‚       â”‚       â””â”€â”€ DocumentChunker.php
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“‚ Pipeline/            # å¤„ç†ç®¡é“
â”‚       â”‚   â”œâ”€â”€ Pipeline.php
â”‚       â”‚   â”œâ”€â”€ PipelineContext.php
â”‚       â”‚   â””â”€â”€ ğŸ“‚ Pipes/           # 8 ä¸ªç®¡é“ç»„ä»¶
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“‚ Memory/              # è®°å¿†ç³»ç»Ÿ
â”‚       â”‚   â”œâ”€â”€ CuigeMemoryEngine.php  # ä¸‰çº§è®°å¿†å¼•æ“
â”‚       â”‚   â”œâ”€â”€ ShortTerm.php       # çŸ­æœŸè®°å¿† (Redis)
â”‚       â”‚   â”œâ”€â”€ Summary.php         # æ‘˜è¦è®°å¿† (MySQL)
â”‚       â”‚   â””â”€â”€ VectorStore.php     # é•¿æœŸè®°å¿† (pgvector)
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“‚ Providers/           # æ¨¡å‹é©±åŠ¨
â”‚       â”‚   â”œâ”€â”€ DeepseekProvider.php
â”‚       â”‚   â”œâ”€â”€ OpenAIProvider.php
â”‚       â”‚   â””â”€â”€ EmbeddingProvider.php
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“‚ Tools/               # AI å·¥å…·ç®±
â”‚       â”‚   â”œâ”€â”€ ToolRegistry.php    # å·¥å…·æ³¨å†Œä¸­å¿ƒ
â”‚       â”‚   â”œâ”€â”€ ToolSandbox.php     # å®‰å…¨æ²™ç®±
â”‚       â”‚   â””â”€â”€ ğŸ“‚ System/Business/ # å…·ä½“å·¥å…·
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ“‚ Tasks/               # é¢„è®¾ä»»åŠ¡
â”‚           â”œâ”€â”€ DebateAgent.php     # è¾©è®º Agent
â”‚           â”œâ”€â”€ ContractReview.php  # åˆåŒå®¡æŸ¥
â”‚           â””â”€â”€ WorktimeEstimate.php # å·¥æ—¶ä¼°ç®—
â”‚
â”œâ”€â”€ ğŸ“‚ config/                      # Nginx é…ç½®
â”œâ”€â”€ ğŸ“‚ database/                    # SQL è„šæœ¬
â”œâ”€â”€ ğŸ“‚ docs/                        # ğŸ“– æ–‡æ¡£
â”œâ”€â”€ ğŸ“‚ tests/                       # æµ‹è¯•ç”¨ä¾‹
â””â”€â”€ ğŸ“‚ workers/                     # åå°è¿›ç¨‹
```

---

## ğŸ›¡ï¸ CFC ä¸ƒå®—ç½ª (æ¶æ„çº¢çº¿)

CFC V7.7 ä¸¥æ ¼éµå¾ªã€Œä¸ƒå®—ç½ªã€å¼€å‘è§„èŒƒï¼Œè¿åä»»ä½•ä¸€æ¡å³ä¸ºæ¶æ„è¿è§„ï¼š

| # | ç½ªå | ç¦æ­¢è¡Œä¸º | æ­£ç¡®åšæ³• |
|:---:|:---|:---|:---|
| 1ï¸âƒ£ | **ç¦æ­¢æ–°å…¥å£** | åˆ›å»º `api.php`, `webhook.php` | æ‰€æœ‰è¯·æ±‚èµ° `public/index.php` |
| 2ï¸âƒ£ | **ç¦æ­¢ç§è¿** | `new PDO()` åœ¨ Controller/Service | æ„é€ å‡½æ•°ä¾èµ–æ³¨å…¥ |
| 3ï¸âƒ£ | **ç¦æ­¢ç›´æ¥å®ä¾‹åŒ–** | `new Service()` åœ¨æ–¹æ³•å†… | IoC å®¹å™¨ / å·¥å‚æ¨¡å¼ |
| 4ï¸âƒ£ | **ç¦æ­¢åŸå§‹è¾“å‡º** | `echo`, `print_r`, `header()` | è¿”å› `Response` å¯¹è±¡ |
| 5ï¸âƒ£ | **ç¦æ­¢è¯»å–é…ç½®** | `getenv()` åœ¨ Controller | æ³¨å…¥ Config æœåŠ¡ |
| 6ï¸âƒ£ | **è´«è¡€æ§åˆ¶å™¨** | Controller å†…å†™ä¸šåŠ¡é€»è¾‘ | å§”æ‰˜ Service å¤„ç† |
| 7ï¸âƒ£ | **ç¦æ­¢ç¡¬ç¼–ç ** | SQL/Prompt å†™åœ¨é€»è¾‘ä»£ç ä¸­ | Repository/TemplateManager |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **PHP** >= 8.2 (å¯ç”¨ strict_types)
- **PostgreSQL** >= 16 + pgvector æ‰©å±•
- **Redis** >= 6.0
- **Nginx** + PHP-FPM
- **Composer** >= 2.0

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/cuitqiang/CFC_AI.git
cd CFC_AI

# 2. å®‰è£…ä¾èµ–
composer install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥ä½ çš„ API Keys

# 4. åˆå§‹åŒ–æ•°æ®åº“
psql -U postgres -d your_db -f database/schema.sql

# 5. é…ç½® Nginx
sudo cp config/nginx_ai_debate.conf /etc/nginx/sites-enabled/
sudo nginx -t && sudo systemctl reload nginx

# 6. å¯åŠ¨æœåŠ¡
# HTTP: http://your-domain:5555
# HTTPS: https://your-domain:5556 (éº¦å…‹é£éœ€è¦ HTTPS)
```

### ç¯å¢ƒå˜é‡é…ç½®

```env
# .env é…ç½®ç¤ºä¾‹

# æ•°æ®åº“
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ai_crm
DB_USER=postgres
DB_PASS=your_password

# Redis
REDIS_HOST=127.0.0.1
REDIS_PORT=6379

# AI æ¨¡å‹ API
DEEPSEEK_API_KEY=sk-xxx
DEEPSEEK_BASE_URL=https://api.deepseek.com

OPENAI_API_KEY=sk-xxx
OPENAI_BASE_URL=https://api.openai.com/v1

# å¯é€‰: ä¸­è½¬ API
RELAY_API_KEY=sk-xxx
RELAY_BASE_URL=https://your-relay.com/v1
```

---

## ğŸ“¡ API æ–‡æ¡£

### åŸºç¡€ç«¯ç‚¹

| Method | Endpoint | æè¿° |
|:---:|:---|:---|
| `GET` | `/api/system/health` | å¥åº·æ£€æŸ¥ |
| `POST` | `/api/cuige/chat` | AI å¯¹è¯ (æµå¼) |
| `POST` | `/api/cuige/chat-sync` | AI å¯¹è¯ (åŒæ­¥) |
| `GET` | `/api/cuige/history` | è·å–å¯¹è¯å†å² |
| `POST` | `/api/cuige/clear` | æ¸…ç©ºä¼šè¯ |

### RAG çŸ¥è¯†åº“

| Method | Endpoint | æè¿° |
|:---:|:---|:---|
| `POST` | `/api/rag/upload` | ä¸Šä¼ æ–‡æ¡£ |
| `POST` | `/api/rag/search` | çŸ¥è¯†æ£€ç´¢ |
| `GET` | `/api/rag/documents` | æ–‡æ¡£åˆ—è¡¨ |

### å¤š Agent è¾©è®º

| Method | Endpoint | æè¿° |
|:---:|:---|:---|
| `POST` | `/api/debate/start` | å‘èµ·è¾©è®º |
| `GET` | `/api/debate/stream` | SSE è¾©è®ºæµ |

### è¯·æ±‚ç¤ºä¾‹

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:5555/api/system/health

# AI å¯¹è¯ (æµå¼ SSE)
curl -X POST http://localhost:5555/api/cuige/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "ä½ å¥½", "session_id": "user_123"}'

# ä¸Šä¼ çŸ¥è¯†åº“æ–‡æ¡£
curl -X POST http://localhost:5555/api/rag/upload \
  -F "file=@contract.pdf" \
  -F "category=contracts"

# å‘èµ·è¾©è®º
curl -X POST http://localhost:5555/api/debate/start \
  -H "Content-Type: application/json" \
  -d '{"topic": "AIæ˜¯å¦ä¼šå–ä»£äººç±»å·¥ä½œ?", "rounds": 3}'
```

### å“åº”æ ¼å¼

```json
// æˆåŠŸå“åº”
{
  "success": true,
  "data": { ... },
  "message": "æ“ä½œæˆåŠŸ"
}

// é”™è¯¯å“åº”
{
  "success": false,
  "error": "é”™è¯¯æè¿°",
  "code": 400
}

// SSE æµå¼å“åº”
data: {"type": "content", "text": "ä½ å¥½"}
data: {"type": "content", "text": "ï¼"}
data: {"type": "done", "usage": {"tokens": 15}}
```

---

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€å¯¹è¯

```php
<?php
use Services\AI\Core\AIManager;

// ç®€å•å¯¹è¯
$result = AIManager::chat('ä½ å¥½ï¼Œä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±');
echo $result['content'];

// å¸¦ä¼šè¯ä¸Šä¸‹æ–‡
$result = AIManager::chat('ç»§ç»­åˆšæ‰çš„è¯é¢˜', [
    'session_id' => 'user_123'
]);
```

### æµå¼è¾“å‡º

```php
<?php
use Services\AI\Core\AIManager;
use App\Core\SSEResponse;

SSEResponse::start();

AIManager::stream('è¯·å†™ä¸€é¦–è¯—', function($chunk) {
    SSEResponse::send($chunk);
});

SSEResponse::end();
```

### RAG çŸ¥è¯†æ£€ç´¢

```php
<?php
use Services\AI\Core\RAG\VectorService;

$rag = new VectorService($pdo);

// ä¸Šä¼ æ–‡æ¡£
$docId = $rag->ingestDocument('/path/to/contract.pdf');

// æ£€ç´¢ç›¸å…³å†…å®¹
$results = $rag->search('åˆåŒè¿çº¦æ¡æ¬¾', limit: 5);
```

### å·¥å…·è°ƒç”¨

```php
<?php
use Services\AI\Core\AIManager;

$result = AIManager::agent('general')
    ->withTools(['database_reader', 'time_calculator'])
    ->run('æŸ¥è¯¢æœ¬æœˆé”€å”®é¢å¹¶è®¡ç®—ç¯æ¯”å¢é•¿');
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|:---|:---:|:---|
| **é¦–å­—å»¶è¿Ÿ** | < 500ms | æµå¼å“åº”é¦–å­—èŠ‚æ—¶é—´ |
| **QPS** | 100+ | å•å®ä¾‹å¹¶å‘èƒ½åŠ› |
| **å†…å­˜å ç”¨** | < 128MB | PHP-FPM å•è¿›ç¨‹ |
| **å‘é‡æ£€ç´¢** | < 50ms | pgvector 10ä¸‡æ¡çº§åˆ« |

---

## ğŸ”§ æŠ€æœ¯æ ˆ

<table>
<tr>
<td align="center"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-original.svg" width="40"/><br/>PHP 8.2+</td>
<td align="center"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg" width="40"/><br/>PostgreSQL</td>
<td align="center"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/redis/redis-original.svg" width="40"/><br/>Redis</td>
<td align="center"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nginx/nginx-original.svg" width="40"/><br/>Nginx</td>
</tr>
<tr>
<td align="center">ğŸ§ <br/>DeepSeek V3</td>
<td align="center">ğŸ¤–<br/>OpenAI GPT-4</td>
<td align="center">ğŸ“Š<br/>pgvector</td>
<td align="center">âš¡<br/>SSE Stream</td>
</tr>
</table>

---

## ğŸ“– æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£ | æè¿° |
|:---|:---|
| [ğŸ“‹ INSTALL.md](docs/INSTALL.md) | è¯¦ç»†å®‰è£…æŒ‡å— |
| [ğŸ—ï¸ CFC V7.7 æ¶æ„å…¨æ™¯å›¾](docs/CFC%20V7.7%20é¡¹ç›®æ¶æ„å…¨æ™¯å›¾.md) | æ¶æ„è®¾è®¡è¯¦è§£ |
| [ğŸ” æ¡†æ¶è¯„ä¼°æŠ¥å‘Š](docs/CFC_V7.7_Framework_Evaluation.md) | æ·±åº¦æŠ€æœ¯è¯„ä¼° |
| [ğŸ’¬ è¾©è®ºç³»ç»ŸæŒ‡å—](docs/DEBATE_GUIDE.md) | å¤š Agent è¾©è®ºä½¿ç”¨ |
| [ğŸ§  è®°å¿†ç³»ç»Ÿè¯¦è§£](docs/memory_system_diagram.md) | ä¸‰çº§è®°å¿†æ¶æ„ |
| [ğŸ“Š å®¡è®¡æŠ¥å‘Š](SYSTEM_AUDIT_REPORT_V7.7.md) | åˆè§„æ€§å®¡è®¡ |

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å‘èµ· Pull Request

### å¼€å‘è§„èŒƒ

- éµå¾ª PSR-12 ä»£ç é£æ ¼
- æ‰€æœ‰æ–°åŠŸèƒ½å¿…é¡»é€šè¿‡ã€Œä¸ƒå®—ç½ªã€æ£€æŸ¥
- Controller æ–¹æ³•ä¸è¶…è¿‡ 50 è¡Œ
- Service å¿…é¡»é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

---

## ğŸ“§ è”ç³»æ–¹å¼

- **ä½œè€…**: cuitqiang
- **GitHub**: [@cuitqiang](https://github.com/cuitqiang)

---

<p align="center">
  <sub>Built with â¤ï¸ using CFC Framework V7.7</sub>
</p>

<p align="center">
  <a href="#-cfc-ai-framework-v77">â¬†ï¸ è¿”å›é¡¶éƒ¨</a>
</p>
